{"version":"3.1.0","type":"application/json","title":"$:/plugins/Gk0Wk/echarts-liquidfill","plugin-type":"plugin","name":"ECharts Liquid Fill Chart","list":"readme","description":"Liquid Fill Chart plugin for Apache ECharts, which is usually used to represent data in percentage.","source":"https://github.com/tiddly-gittly/tw-echarts/tree/master/plugins/Gk0Wk/echarts-liquidfill","parent-plugin":"$:/plugins/Gk0Wk/echarts","dependents":"$:/plugins/Gk0Wk/echarts","text":"{\"tiddlers\":{\"$:/plugins/Gk0Wk/echarts-liquidfill/echarts-liquidfill.min.js\":{\"title\":\"$:/plugins/Gk0Wk/echarts-liquidfill/echarts-liquidfill.min.js\",\"text\":\"!function(e,t){\\\"object\\\"==typeof exports&&\\\"object\\\"==typeof module?module.exports=t(require(\\\"$:/plugins/Gk0Wk/echarts/echarts.min.js\\\")):\\\"function\\\"==typeof define&&define.amd?define([\\\"$:/plugins/Gk0Wk/echarts/echarts.min.js\\\"],t):\\\"object\\\"==typeof exports?exports[\\\"echarts-liquidfill\\\"]=t(require(\\\"$:/plugins/Gk0Wk/echarts/echarts.min.js\\\")):e[\\\"echarts-liquidfill\\\"]=t(e.echarts)}(self,function(t){return(()=>{\\\"use strict\\\";var a={245:(e,t,a)=>{a.r(t);var k=a(83);k.extendSeriesModel({type:\\\"series.liquidFill\\\",optionUpdated:function(){var e=this.option;e.gridSize=Math.max(Math.floor(e.gridSize),4)},getInitialData:function(e,t){var a=k.helper.createDimensions(e.data,{coordDimensions:[\\\"value\\\"]}),a=new k.List(a,this);return a.initData(e.data),a},defaultOption:{color:[\\\"#294D99\\\",\\\"#156ACF\\\",\\\"#1598ED\\\",\\\"#45BDFF\\\"],center:[\\\"50%\\\",\\\"50%\\\"],radius:\\\"50%\\\",amplitude:\\\"8%\\\",waveLength:\\\"80%\\\",phase:\\\"auto\\\",period:\\\"auto\\\",direction:\\\"right\\\",shape:\\\"circle\\\",waveAnimation:!0,animationEasing:\\\"linear\\\",animationEasingUpdate:\\\"linear\\\",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:\\\"none\\\",borderColor:\\\"#294D99\\\",borderWidth:8,shadowBlur:20,shadowColor:\\\"rgba(0, 0, 0, 0.25)\\\"}},backgroundStyle:{color:\\\"#E3F7FF\\\"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:\\\"rgba(0, 0, 0, 0.4)\\\"},label:{show:!0,color:\\\"#294D99\\\",insideColor:\\\"#fff\\\",fontSize:50,fontWeight:\\\"bold\\\",align:\\\"center\\\",baseline:\\\"middle\\\",position:\\\"inside\\\"},emphasis:{itemStyle:{opacity:.8}}}});const D=k.graphic.extendShape({type:\\\"ec-liquid-fill\\\",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(e,t){null==t.radiusY&&(t.radiusY=t.radius);for(var a=Math.max(2*Math.ceil(2*t.radius/t.waveLength*4),8);t.phase<2*-Math.PI;)t.phase+=2*Math.PI;for(;0<t.phase;)t.phase-=2*Math.PI;var i=t.phase/Math.PI/2*t.waveLength,r=t.cx-t.radius+i-2*t.radius;e.moveTo(r,t.waterLevel);for(var l,n,o,s,h=0,d=0;d<a;++d){l=d*t.waveLength/4,n=d%4,o=t.waveLength,s=t.amplitude;var p=0===n?[[l+.5*o/Math.PI/2,s/2],[l+.5*o/Math.PI,s],[l+o/4,s]]:1===n?[[l+.5*o/Math.PI/2*(Math.PI-2),s],[l+.5*o/Math.PI/2*(Math.PI-1),s/2],[l+o/4,0]]:2===n?[[l+.5*o/Math.PI/2,-s/2],[l+.5*o/Math.PI,-s],[l+o/4,-s]]:[[l+.5*o/Math.PI/2*(Math.PI-2),-s],[l+.5*o/Math.PI/2*(Math.PI-1),-s/2],[l+o/4,0]];e.bezierCurveTo(p[0][0]+r,-p[0][1]+t.waterLevel,p[1][0]+r,-p[1][1]+t.waterLevel,p[2][0]+r,-p[2][1]+t.waterLevel),d===a-1&&(h=p[2][0])}t.inverse?(e.lineTo(h+r,t.cy-t.radiusY),e.lineTo(r,t.cy-t.radiusY)):(e.lineTo(h+r,t.cy+t.radiusY),e.lineTo(r,t.cy+t.radiusY)),e.lineTo(r,t.waterLevel),e.closePath()}});var F=function(e,t){switch(e){case\\\"center\\\":case\\\"middle\\\":e=\\\"50%\\\";break;case\\\"left\\\":case\\\"top\\\":e=\\\"0%\\\";break;case\\\"right\\\":case\\\"bottom\\\":e=\\\"100%\\\"}return\\\"string\\\"==typeof e?e.replace(/^\\\\s+|\\\\s+$/g,\\\"\\\").match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e};function E(e){return e&&0===e.indexOf(\\\"path://\\\")}k.extendChartView({type:\\\"liquidFill\\\",render:function(c,e,t){var u=this,g=this.group,m=(g.removeAll(),c.getData()),a=m.getItemModel(0),i=a.get(\\\"center\\\"),y=a.get(\\\"radius\\\"),r=t.getWidth(),f=t.getHeight(),l=Math.min(r,f),n=0,o=0,s=c.get(\\\"outline.show\\\");s&&(n=c.get(\\\"outline.borderDistance\\\"),o=F(c.get(\\\"outline.itemStyle.borderWidth\\\"),l));var h,d,p,v=F(i[0],r),w=F(i[1],f),b=!1,M=c.get(\\\"shape\\\"),y=\\\"container\\\"===M?(b=!0,d=[(h=[r/2,f/2])[0]-o/2,h[1]-o/2],p=[F(n,r),F(n,f)],[Math.max(d[0]-p[0],0),Math.max(d[1]-p[1],0)]):(d=(h=F(y,l)/2)-o/2,p=F(n,l),Math.max(d-p,0)),i=(s&&(L().style.lineWidth=o,g.add(L())),b?0:v-y),r=b?0:w-y,P=null,x=(g.add(((n=S(y)).setStyle(c.getModel(\\\"backgroundStyle\\\").getItemStyle()),n.style.fill=null,n.z2=5,(l=S(y)).setStyle(c.getModel(\\\"backgroundStyle\\\").getItemStyle()),l.style.stroke=null,(d=new k.graphic.Group).add(n),d.add(l),d)),this._data),I=[];function S(e,t){var a,i,r,l,n,o,s;return M?E(M)?(a=(i=(n=k.graphic.makePath(M.slice(7),{})).getBoundingRect()).width,(i=i.height)<a?(i*=2*e/a,a=2*e):(a*=2*e/i,i=2*e),r=t?0:v-a/2,l=t?0:w-i/2,n=k.graphic.makePath(M.slice(7),{},new k.graphic.BoundingRect(r,l,a,i)),t&&(n.x=-a/2,n.y=-i/2),n):b?(o=t?-e[0]:v-e[0],s=t?-e[1]:w-e[1],k.helper.createSymbol(\\\"rect\\\",o,s,2*e[0],2*e[1])):(o=t?-e:v-e,s=t?-e:w-e,\\\"pin\\\"===M?s+=e:\\\"arrow\\\"===M&&(s-=e),k.helper.createSymbol(M,o,s,2*e,2*e)):new k.graphic.Circle({shape:{cx:t?0:v,cy:t?0:w,r:e}})}function L(){var e=S(h);return e.style.fill=null,e.setStyle(c.getModel(\\\"outline.itemStyle\\\").getItemStyle()),e}function C(e,t,a){var i=b?y[0]:y,r=b?f/2:y,l=m.getItemModel(e),n=l.getModel(\\\"itemStyle\\\"),o=l.get(\\\"phase\\\"),s=F(l.get(\\\"amplitude\\\"),2*r),h=F(l.get(\\\"waveLength\\\"),2*i),d=r-m.get(\\\"value\\\",e)*r*2,o=a?a.shape.phase:\\\"auto\\\"===o?e*Math.PI/4:o,n=n.getItemStyle(),p=(n.fill||(p=e%(u=c.get(\\\"color\\\")).length,n.fill=u[p]),new D({shape:{waveLength:h,radius:i,radiusY:r,cx:2*i,cy:0,waterLevel:d,amplitude:s,phase:o,inverse:t},style:n,x:v,y:w})),u=(p.shape._waterLevel=d,l.getModel(\\\"emphasis.itemStyle\\\").getItemStyle()),h=(u.lineWidth=0,p.ensureState(\\\"emphasis\\\").style=u,k.helper.enableHoverEmphasis(p),S(y,!0));return h.setStyle({fill:\\\"white\\\"}),p.setClipPath(h),p}function T(e,t,a){var i=m.getItemModel(e),r=i.get(\\\"period\\\"),l=i.get(\\\"direction\\\"),n=m.get(\\\"value\\\",e),o=i.get(\\\"phase\\\"),o=a?a.shape.phase:\\\"auto\\\"===o?e*Math.PI/4:o,s=\\\"auto\\\"===r?0===(s=m.count())?5e3:5e3*(.2+(s-e)/s*.8):\\\"function\\\"==typeof r?r(n,e):r,n=0;\\\"right\\\"===l||null==l?n=Math.PI:\\\"left\\\"===l?n=-Math.PI:\\\"none\\\"===l?n=0:console.error(\\\"Illegal direction value for liquid fill.\\\"),\\\"none\\\"!==l&&i.get(\\\"waveAnimation\\\")&&t.animate(\\\"shape\\\",!0).when(0,{phase:o}).when(s/2,{phase:n+o}).when(s,{phase:2*n+o}).during(function(){P&&P.dirty(!0)}).start()}m.diff(x).add(function(e){var t=C(e,!1),a=t.shape.waterLevel;t.shape.waterLevel=b?f/2:y,k.graphic.initProps(t,{shape:{waterLevel:a}},c),t.z2=2,T(e,t,null),g.add(t),m.setItemGraphicEl(e,t),I.push(t)}).update(function(e,t){for(var a=x.getItemGraphicEl(t),i=C(e,!1,a),r={},l=[\\\"amplitude\\\",\\\"cx\\\",\\\"cy\\\",\\\"phase\\\",\\\"radius\\\",\\\"radiusY\\\",\\\"waterLevel\\\",\\\"waveLength\\\"],n=0;n<l.length;++n){var o=l[n];i.shape.hasOwnProperty(o)&&(r[o]=i.shape[o])}for(var s={},h=[\\\"fill\\\",\\\"opacity\\\",\\\"shadowBlur\\\",\\\"shadowColor\\\"],n=0;n<h.length;++n)i.style.hasOwnProperty(o=h[n])&&(s[o]=i.style[o]);b&&(r.radiusY=f/2),k.graphic.updateProps(a,{shape:r,x:i.x,y:i.y},c),c.isUniversalTransitionEnabled&&c.isUniversalTransitionEnabled()?k.graphic.updateProps(a,{style:s},c):a.useStyle(s);var d=a.getClipPath(),p=i.getClipPath();a.setClipPath(i.getClipPath()),a.shape.inverse=i.inverse,d&&p&&u._shape===M&&!E(M)&&k.graphic.updateProps(p,{shape:d.shape},c,{isFrom:!0}),T(e,a,a),g.add(a),m.setItemGraphicEl(e,a),I.push(a)}).remove(function(e){var t=x.getItemGraphicEl(e);g.remove(t)}).execute(),a.get(\\\"label.show\\\")&&g.add((t=I,p=a.getModel(\\\"label\\\"),s={z2:10,shape:{x:i,y:r,width:2*(b?y[0]:y),height:2*(b?y[1]:y)},style:{fill:\\\"transparent\\\"},textConfig:{position:p.get(\\\"position\\\")||\\\"inside\\\"},silent:!0},n={style:{text:(o=c.getFormattedLabel(0,\\\"normal\\\"),n=100*m.get(\\\"value\\\",0),l=m.getName(0)||c.name,isNaN(n)||(l=n.toFixed(0)+\\\"%\\\"),null==o?l:o),textAlign:p.get(\\\"align\\\"),textVerticalAlign:p.get(\\\"baseline\\\")}},Object.assign(n.style,k.helper.createTextStyle(p)),l=new k.graphic.Rect(s),(o=new k.graphic.Rect(s)).disableLabelAnimation=!0,l.disableLabelAnimation=!0,s=new k.graphic.Text(n),n=new k.graphic.Text(n),l.setTextContent(s),o.setTextContent(n),s=p.get(\\\"insideColor\\\"),n.style.fill=s,(p=new k.graphic.Group).add(l),p.add(o),n=S(y,!0),(P=new k.graphic.CompoundPath({shape:{paths:t},x:v,y:w})).setClipPath(n),o.setClipPath(P),p)),this._shape=M,this._data=m},dispose:function(){}})},83:e=>{e.exports=t}},i={};function r(e){var t;return(i[e]||(t=i[e]={exports:{}},a[e](t,t.exports,r),t)).exports}return r.r=e=>{\\\"undefined\\\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(e,\\\"__esModule\\\",{value:!0})},r(245)})()});\",\"type\":\"application/javascript\",\"module-type\":\"echarts-extension\",\"Modern.TiddlyDev#Minify\":\"false\"},\"$:/plugins/Gk0Wk/echarts-liquidfill/readme\":{\"title\":\"$:/plugins/Gk0Wk/echarts-liquidfill/readme\",\"text\":\"<$list filter=\\\"[[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]]\\\" variable=\\\"lang\\\">\\n<$list filter=\\\"[<lang>search[zh]]\\\">\\n\\n[[liquid-fill chart|https://github.com/ecomfe/echarts-liquidfill]] 是一个适合展示单一百分比数据的图表，支持多种水波和动画。\\n\\n* 文档: https://github.com/ecomfe/echarts-liquidfill\\n* 示例: https://www.makeapie.com/explore.html#tags=liquidFill~sort=rank~timeframe=all~author=all\\n\\n</$list>\\n\\n<$list filter=\\\"[<lang>!search[zh]]\\\">\\n\\nThe [[liquid-fill chart|https://github.com/ecomfe/echarts-liquidfill]] is a chart suitable for presenting a single percentage of data, supporting multiple water waves and animations.\\n\\n* Doc: https://github.com/ecomfe/echarts-liquidfill\\n* Examples: https://www.makeapie.com/explore.html#tags=liquidFill~sort=rank~timeframe=all~author=all\\n\\n</$list>\\n</$list>\\n\\n[img[https://camo.githubusercontent.com/5dee5f268a24b4a088abc369149ecaee64db44bc9192e7a54fc186b7e12a5e68/687474703a2f2f672e7265636f726469742e636f2f7a48654d71716c68346a2e676966]]\\n\"}}}","Modern.TiddlyDev#SHA256-Hashed":"ef84545774eaef1a1ccd9e93bcf9c2422abe6330d7c83987e6b52bbe90578c31","author":"Gk0Wk","core-version":">=5.2.0"}